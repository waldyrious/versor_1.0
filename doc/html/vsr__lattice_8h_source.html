<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Versor: /Users/wolftype/code/vsr/VSR/vsr_lattice.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Versor
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">C++ Library for Conformal Geometric Algebra</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/Users/wolftype/code/vsr/VSR/vsr_lattice.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> *  LATTICE.h</span>
<a name="l00003"></a>00003 <span class="comment"> *  </span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> *  Created by Pablo Colapinto on 1/28/10.</span>
<a name="l00006"></a>00006 <span class="comment"> *  Copyright 2010 x. All rights reserved.</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> */</span>
<a name="l00009"></a>00009  
<a name="l00076"></a>00076 <span class="preprocessor">#ifndef VSR_LATTICE_H_INCLUDED</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span><span class="preprocessor">#define VSR_LATTICE_H_INCLUDED</span>
<a name="l00078"></a>00078 <span class="preprocessor"></span>
<a name="l00079"></a>00079 <span class="comment">//#include &quot;vsr_gl.h&quot;</span>
<a name="l00080"></a>00080 <span class="preprocessor">#include &quot;vsr_gfxdata.h&quot;</span>
<a name="l00081"></a>00081 
<a name="l00082"></a>00082 <span class="preprocessor">#include &quot;vsr.h&quot;</span>
<a name="l00083"></a>00083 <span class="preprocessor">#include &quot;vsr_op.h&quot;</span>
<a name="l00084"></a>00084 <span class="preprocessor">#include &quot;vsr_frame.h&quot;</span>
<a name="l00085"></a>00085 <span class="preprocessor">#include &quot;vsr_matrix.h&quot;</span>
<a name="l00086"></a>00086 
<a name="l00087"></a>00087 <span class="comment">//#include &quot;vsr_draw.h&quot;</span>
<a name="l00088"></a>00088 
<a name="l00089"></a>00089 <span class="keyword">using</span> std::ostream;
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 <span class="keyword">namespace </span>vsr {
<a name="l00092"></a>00092 
<a name="l00093"></a>00093         <span class="keyword">enum</span> {
<a name="l00094"></a>00094                 _LEFT   = 1,
<a name="l00095"></a>00095                 _RIGHT  = 1 &lt;&lt; 1,
<a name="l00096"></a>00096                 _BOTTOM = 1 &lt;&lt; 2,
<a name="l00097"></a>00097                 _TOP    = 1 &lt;&lt; 3,
<a name="l00098"></a>00098                 _FRONT  = 1 &lt;&lt; 4,
<a name="l00099"></a>00099                 _BACK   = 1 &lt;&lt; 5,
<a name="l00100"></a>00100                 _ALLSIDES = _LEFT | _RIGHT | _BOTTOM | _TOP | _FRONT | _BACK
<a name="l00101"></a>00101         };
<a name="l00102"></a>00102 
<a name="l00103"></a>00103         
<a name="l00104"></a>00104         <span class="comment">//When Templating, Predeclare all friends so compiler knows these are templated functions as well</span>
<a name="l00105"></a>00105         <span class="keyword">template</span> &lt; <span class="keyword">class</span> T &gt; <span class="keyword">class </span>Lattice;
<a name="l00106"></a>00106         <span class="keyword">template</span> &lt; <span class="keyword">class</span> T &gt; ostream&amp; operator &lt;&lt; (ostream&amp; os, const Lattice&lt; T &gt;&amp;);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108         <span class="keyword">template</span> &lt; <span class="keyword">class</span> T = Vec &gt; 
<a name="l00109"></a><a class="code" href="classvsr_1_1_lattice.html">00109</a>         <span class="keyword">class </span><a class="code" href="classvsr_1_1_lattice.html">Lattice</a> : <span class="keyword">public</span> <a class="code" href="classvsr_1_1_frame.html">Frame</a> {
<a name="l00110"></a>00110         
<a name="l00111"></a>00111                 <span class="keyword">protected</span>:
<a name="l00112"></a>00112                         
<a name="l00113"></a>00113                         <span class="comment">//parameters of the Lattice</span>
<a name="l00114"></a>00114                         <span class="keywordtype">int</span> mWidth, mHeight, mDepth, mNum, mDim, mNumVxl, mType;
<a name="l00115"></a>00115             <span class="keywordtype">int</span> mNumFace, mNumEdge;
<a name="l00116"></a>00116 
<a name="l00117"></a>00117             <span class="keywordtype">float</span> mSpacing;                     
<a name="l00118"></a>00118 
<a name="l00119"></a>00119                         <span class="comment">//data array</span>
<a name="l00120"></a>00120                         T       * mData;
<a name="l00121"></a>00121                         <span class="comment">//last timestep</span>
<a name="l00122"></a>00122                         T       * mPrev;
<a name="l00123"></a>00123 
<a name="l00124"></a>00124                         <span class="comment">//vxl access</span>
<a name="l00125"></a>00125                         <a class="code" href="classvsr_1_1_vxl.html">Vxl</a> * mVxl;
<a name="l00126"></a>00126                         <span class="comment">//nbr access</span>
<a name="l00127"></a>00127                         <a class="code" href="classvsr_1_1_nbr.html">Nbr</a> * mNbr, *mVNbr;
<a name="l00128"></a>00128                         
<a name="l00129"></a>00129                         <span class="comment">//Fixed Reference (spheres)</span>
<a name="l00130"></a>00130                         <a class="code" href="classvsr_1_1_m_v.html">Dls</a> * mGrid;
<a name="l00131"></a>00131                         
<a name="l00132"></a>00132             vector &lt;int&gt; mFace;
<a name="l00133"></a>00133                         vector &lt;int&gt; mEdge;
<a name="l00134"></a>00134                         vector &lt;int&gt; mCorner;
<a name="l00135"></a>00135                         vector &lt;int&gt; mFaceVxl;
<a name="l00136"></a>00136                         vector &lt;int&gt; mEdgeVxl;
<a name="l00137"></a>00137                         vector &lt;int&gt; mCornerVxl;                                                
<a name="l00138"></a>00138                                                                 
<a name="l00140"></a>00140                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#abe07e1c384339da961e0b0c5e776c84a" title="Routines to Find Face and Edge Boundary.">vxlFE</a>( <a class="code" href="classvsr_1_1_nbr.html">Nbr</a> nb );
<a name="l00141"></a>00141                         <span class="keywordtype">void</span> FE(<a class="code" href="classvsr_1_1_nbr.html">Nbr</a> nb );
<a name="l00142"></a>00142 
<a name="l00143"></a>00143         <span class="comment">//Deprecated </span>
<a name="l00144"></a>00144         <span class="comment">//            void facesAndEdges( Nbr nb, int *, int *);</span>
<a name="l00145"></a>00145         <span class="comment">//                      void facesAndEdgesVxl( Nbr nb, int *, int *);   </span>
<a name="l00146"></a>00146                         
<a name="l00147"></a>00147                 <span class="keyword">public</span>:
<a name="l00148"></a>00148                 
<a name="l00149"></a>00149                         <a class="code" href="classvsr_1_1_lattice.html">Lattice</a>();
<a name="l00150"></a>00150                         ~<a class="code" href="classvsr_1_1_lattice.html">Lattice</a>();                     
<a name="l00151"></a>00151                         <a class="code" href="classvsr_1_1_lattice.html">Lattice</a> (<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#ae377e62dbbed1f950bd900c34b30fb89" title="get width">w</a>, <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a51b0756a11687bb9f69f886ed90ff68a" title="get height">h</a>, <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a5ee2e0d41d22764521a812a82074886b" title="get depth">d</a>, <span class="keywordtype">float</span> s =.1);
<a name="l00152"></a>00152                         <span class="keywordtype">void</span> resize(<span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">int</span> d, <span class="keywordtype">float</span> s = .1);
<a name="l00153"></a>00153                         
<a name="l00155"></a>00155             <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#ac4484f3f67b5d0b842263c4735a09548">alloc</a>();
<a name="l00157"></a>00157                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a9c70f331ac4bf55b130caec17eeb670d">init</a>();
<a name="l00159"></a>00159                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#aa35efc7f6311788357984828007b0d64">copyPrev</a>();
<a name="l00161"></a><a class="code" href="classvsr_1_1_lattice.html#a64c3fbe61526e6a9979fa5a7c051e784">00161</a>                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a64c3fbe61526e6a9979fa5a7c051e784">swap</a>() { T * tmp = mPrev; mPrev = mData; mData = tmp; }
<a name="l00162"></a>00162                         
<a name="l00164"></a>00164 <span class="comment">//                      void networkData(){ </span>
<a name="l00165"></a>00165 <span class="comment">//                              for (int i = 0; i &lt; mNum; ++i) {</span>
<a name="l00166"></a>00166 <span class="comment">//                                      mNetwork.push_back((Observer*)&amp;(mData[i]));</span>
<a name="l00167"></a>00167 <span class="comment">//                                      mNetwork.push_back((Observer*)&amp;(mPrev[i]));  </span>
<a name="l00168"></a>00168 <span class="comment">//                              }</span>
<a name="l00169"></a>00169 <span class="comment">//                      }</span>
<a name="l00170"></a>00170         
<a name="l00171"></a><a class="code" href="classvsr_1_1_lattice.html#a4aa6212d4c145407baaff3d334f9dbad">00171</a>             <span class="keywordtype">bool</span> <a class="code" href="classvsr_1_1_lattice.html#a4aa6212d4c145407baaff3d334f9dbad">hit</a>(<a class="code" href="classvsr_1_1_m_v.html">Pnt</a> p, <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>, <span class="keywordtype">double</span> threshold = 0) { <span class="keywordflow">return</span> ( ( p &lt;= mGrid[idx] )[0] &lt;= threshold ) ? 1 : 0; }
<a name="l00172"></a>00172                                         
<a name="l00174"></a><a class="code" href="classvsr_1_1_lattice.html#a713a2a74610b9ee71f03621c6b40f4d3">00174</a>                         T&amp;      <a class="code" href="classvsr_1_1_lattice.html#a713a2a74610b9ee71f03621c6b40f4d3">operator [] </a>(<span class="keywordtype">int</span> i)     { <span class="keywordflow">return</span> ( ( (T*) mData ) [i] ); }
<a name="l00176"></a><a class="code" href="classvsr_1_1_lattice.html#a77a93f29e2934c6ba7685945a87f3207">00176</a>                         T       <a class="code" href="classvsr_1_1_lattice.html#a713a2a74610b9ee71f03621c6b40f4d3">operator [] </a>(<span class="keywordtype">int</span> i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> ( (T*) ( mData ) ) [i]; }
<a name="l00177"></a>00177                         
<a name="l00179"></a><a class="code" href="classvsr_1_1_lattice.html#a65c8068054299ed33f37d21961edd670">00179</a>                         T&amp;  <a class="code" href="classvsr_1_1_lattice.html#a65c8068054299ed33f37d21961edd670">at</a>(<span class="keywordtype">int</span> w = 0, <span class="keywordtype">int</span> h = 0, <span class="keywordtype">int</span> d = 0) { <span class="keywordflow">return</span> (*<span class="keyword">this</span>)[ <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>(w, h, d)  ]; }   
<a name="l00181"></a><a class="code" href="classvsr_1_1_lattice.html#a2649e8e22042ed3c2a9288ca0d986f8e">00181</a>                         T       <a class="code" href="classvsr_1_1_lattice.html#a2649e8e22042ed3c2a9288ca0d986f8e">at</a>(<span class="keywordtype">int</span> w = 0, <span class="keywordtype">int</span> h = 0, <span class="keywordtype">int</span> d = 0)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (*<span class="keyword">this</span>)[ <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>(w, h, d)  ]; }  
<a name="l00182"></a>00182 
<a name="l00184"></a><a class="code" href="classvsr_1_1_lattice.html#ac59d9a773db6eaca5875c270325ed407">00184</a>                         T * <a class="code" href="classvsr_1_1_lattice.html#ac59d9a773db6eaca5875c270325ed407">data</a>()              { <span class="keywordflow">return</span> mData; }
<a name="l00186"></a><a class="code" href="classvsr_1_1_lattice.html#a830d2aba3ce988d1b8def73b52344625">00186</a>                         T * <a class="code" href="classvsr_1_1_lattice.html#a830d2aba3ce988d1b8def73b52344625">prev</a>()              { <span class="keywordflow">return</span> mPrev; }
<a name="l00188"></a><a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">00188</a>                         <a class="code" href="classvsr_1_1_m_v.html">Dls</a> * <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a>()    { <span class="keywordflow">return</span> mGrid; }
<a name="l00190"></a><a class="code" href="classvsr_1_1_lattice.html#a24ec792827fe12954e7d9062009035b7">00190</a>                         <a class="code" href="classvsr_1_1_vxl.html">Vxl</a> * <a class="code" href="classvsr_1_1_lattice.html#a24ec792827fe12954e7d9062009035b7">vxl</a>()             { <span class="keywordflow">return</span> mVxl;  }
<a name="l00192"></a>00192                         <span class="comment">//int * face() { return mFace; }</span>
<a name="l00193"></a><a class="code" href="classvsr_1_1_lattice.html#a223ff135ed86d9d4f84fa64074e425a6">00193</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a223ff135ed86d9d4f84fa64074e425a6">face</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mFace[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>]; } 
<a name="l00195"></a>00195                         <span class="comment">//vector &lt;int&gt;&amp; edge() { return mEdge; }</span>
<a name="l00196"></a><a class="code" href="classvsr_1_1_lattice.html#af895169622b0432aa4df2f89b6262b33">00196</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#af895169622b0432aa4df2f89b6262b33">edge</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mEdge[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>]; } 
<a name="l00198"></a><a class="code" href="classvsr_1_1_lattice.html#afae2c7f07d3d6f7143526e38c4ee8968">00198</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#afae2c7f07d3d6f7143526e38c4ee8968">corner</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mCorner[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>]; }
<a name="l00199"></a>00199                         vector&lt;int&gt;&amp; corner() { <span class="keywordflow">return</span> mCorner; }
<a name="l00201"></a>00201                         <span class="comment">//int * faceVxl() { return mFaceVxl; }</span>
<a name="l00202"></a><a class="code" href="classvsr_1_1_lattice.html#a16270ecf9fb6cab6dbb296ce0d51283c">00202</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a16270ecf9fb6cab6dbb296ce0d51283c">faceVxl</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mFaceVxl[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>]; }
<a name="l00204"></a>00204                         <span class="comment">//int * edgeVxl() { return mEdgeVxl; }</span>
<a name="l00205"></a><a class="code" href="classvsr_1_1_lattice.html#aa11a6b28d2e87845639e68945410c927">00205</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#aa11a6b28d2e87845639e68945410c927">edgeVxl</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mEdgeVxl[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>]; }
<a name="l00206"></a>00206 
<a name="l00207"></a>00207                         
<a name="l00208"></a>00208                         T&amp; <a class="code" href="classvsr_1_1_lattice.html#a830d2aba3ce988d1b8def73b52344625">prev</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)                { <span class="keywordflow">return</span> mPrev[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>]; }          T <a class="code" href="classvsr_1_1_lattice.html#a830d2aba3ce988d1b8def73b52344625">prev</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)<span class="keyword">   const </span>{ <span class="keywordflow">return</span> mPrev[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>]; }
<a name="l00209"></a>00209                         Dls&amp; <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)      { <span class="keywordflow">return</span> mGrid[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>]; }          Dls <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mGrid[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>]; }
<a name="l00210"></a>00210                         T&amp; <a class="code" href="classvsr_1_1_lattice.html#ac59d9a773db6eaca5875c270325ed407">data</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)                { <span class="keywordflow">return</span> mData[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>]; }          T <a class="code" href="classvsr_1_1_lattice.html#ac59d9a773db6eaca5875c270325ed407">data</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)<span class="keyword">   const </span>{ <span class="keywordflow">return</span> mData[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>]; }
<a name="l00211"></a>00211                         Nbr&amp; nbr(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)               { <span class="keywordflow">return</span> mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>];  }  Nbr nbr(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)<span class="keyword">  const </span>{ <span class="keywordflow">return</span> mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>];  }
<a name="l00212"></a>00212 
<a name="l00213"></a>00213                         Vxl&amp; <a class="code" href="classvsr_1_1_lattice.html#a24ec792827fe12954e7d9062009035b7">vxl</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)               { <span class="keywordflow">return</span> mVxl[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>];  }  Vxl <a class="code" href="classvsr_1_1_lattice.html#a24ec792827fe12954e7d9062009035b7">vxl</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)<span class="keyword">  const </span>{ <span class="keywordflow">return</span> mVxl[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>];  }
<a name="l00214"></a>00214                         Nbr&amp; vnbr(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)              { <span class="keywordflow">return</span> mVNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>]; }  Nbr vnbr(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mVNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>]; }
<a name="l00215"></a>00215                         
<a name="l00217"></a>00217                         <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt; 
<a name="l00218"></a>00218                         <span class="keyword">static</span> Vxl <a class="code" href="classvsr_1_1_lattice.html#ac9ed3c0ce10a532873a1781cea9c9ef2">_vxlOfVec</a>( <span class="keyword">const</span> <a class="code" href="namespacevsr.html#a0d061c30ac198a710a1b92dd8b343273">Vec</a>&amp;, <span class="keyword">const</span> Lattice&lt;S&gt;&amp;);
<a name="l00220"></a>00220                         <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt; 
<a name="l00221"></a>00221                         <span class="keyword">static</span> Vxl <a class="code" href="classvsr_1_1_lattice.html#a93525a3a9a3ef5e28f03e028f4833074">_vxlOfPnt</a>( <span class="keyword">const</span> <a class="code" href="namespacevsr.html#a2d05beb9721c5d9211b479af6d47222d">Pnt</a>&amp;, <span class="keyword">const</span> Lattice&lt;S&gt;&amp;);
<a name="l00222"></a>00222             
<a name="l00224"></a><a class="code" href="classvsr_1_1_lattice.html#afd9db3eb67943accbb7facef53d9cd74">00224</a>             T <a class="code" href="classvsr_1_1_lattice.html#afd9db3eb67943accbb7facef53d9cd74">surf</a>(<span class="keywordtype">double</span> u, <span class="keywordtype">double</span> v){
<a name="l00225"></a>00225             
<a name="l00226"></a>00226                 <span class="keywordtype">double</span> pw = 1.0 / ( mWidth-1);
<a name="l00227"></a>00227                 <span class="keywordtype">double</span> ph = 1.0/ ( mHeight-1);
<a name="l00228"></a>00228                 <span class="comment">//double pd = 1.0 / mDepth;</span>
<a name="l00229"></a>00229                 
<a name="l00230"></a>00230                 <span class="keywordtype">double</span> fw = u / pw;
<a name="l00231"></a>00231                 <span class="keywordtype">double</span> fh = v / ph;
<a name="l00232"></a>00232                 <span class="comment">//double fd = w / pd;</span>
<a name="l00233"></a>00233                 
<a name="l00234"></a>00234                 <span class="keywordtype">int</span> iw = floor ( fw );
<a name="l00235"></a>00235                 <span class="keywordtype">int</span> ih = floor ( fh );
<a name="l00236"></a>00236                 <span class="comment">//int id = floor ( fd );</span>
<a name="l00237"></a>00237                <span class="comment">// cout &lt;&lt; iw &lt;&lt; &quot; &quot; &lt;&lt; ih &lt;&lt; endl; </span>
<a name="l00238"></a>00238                 
<a name="l00239"></a>00239                 <span class="keywordtype">double</span> rw = fw - iw;
<a name="l00240"></a>00240                 <span class="keywordtype">double</span> rh = fh - ih;
<a name="l00241"></a>00241                 <span class="comment">//double rd = fd - id;</span>
<a name="l00242"></a>00242                <span class="comment">// cout &lt;&lt; rw &lt;&lt; &quot; &quot; &lt;&lt; rh &lt;&lt; endl; </span>
<a name="l00243"></a>00243                 
<a name="l00244"></a>00244                 T a = <a class="code" href="classvsr_1_1_frame.html#a5d29b992dccd6fc2035c9548900c0d38">at</a> ( iw, ih, 0 );
<a name="l00245"></a>00245                 T d = <a class="code" href="classvsr_1_1_frame.html#a5d29b992dccd6fc2035c9548900c0d38">at</a> ( iw, ih + 1, 0 );
<a name="l00246"></a>00246                 T b = <a class="code" href="classvsr_1_1_frame.html#a5d29b992dccd6fc2035c9548900c0d38">at</a> ( iw + 1, ih, 0 );
<a name="l00247"></a>00247                 T c = <a class="code" href="classvsr_1_1_frame.html#a5d29b992dccd6fc2035c9548900c0d38">at</a> ( iw + 1, ih + 1, 0 );
<a name="l00248"></a>00248                 
<a name="l00249"></a>00249                 <span class="keywordflow">return</span> Interp::surface&lt;T&gt; (a,b,c,<a class="code" href="classvsr_1_1_lattice.html#a5ee2e0d41d22764521a812a82074886b" title="get depth">d</a>, rw, rh);
<a name="l00250"></a>00250             }
<a name="l00251"></a>00251             
<a name="l00252"></a>00252             <a class="code" href="classvsr_1_1_m_v.html">Pnt</a> surfpnt(<span class="keywordtype">double</span> u, <span class="keywordtype">double</span> v){
<a name="l00253"></a>00253                  
<a name="l00254"></a>00254                 <span class="keywordtype">double</span> pw = 1.0 / ( mWidth-1);
<a name="l00255"></a>00255                 <span class="keywordtype">double</span> ph = 1.0/ ( mHeight-1);
<a name="l00256"></a>00256                 <span class="comment">//double pd = 1.0 / mDepth;</span>
<a name="l00257"></a>00257                 
<a name="l00258"></a>00258                 <span class="keywordtype">double</span> fw = u / pw;
<a name="l00259"></a>00259                 <span class="keywordtype">double</span> fh = v / ph;
<a name="l00260"></a>00260                 <span class="comment">//double fd = w / pd;</span>
<a name="l00261"></a>00261                 
<a name="l00262"></a>00262                 <span class="keywordtype">int</span> iw = floor ( fw );
<a name="l00263"></a>00263                 <span class="keywordtype">int</span> ih = floor ( fh );
<a name="l00264"></a>00264                 <span class="comment">//int id = floor ( fd );</span>
<a name="l00265"></a>00265                <span class="comment">// cout &lt;&lt; iw &lt;&lt; &quot; &quot; &lt;&lt; ih &lt;&lt; endl; </span>
<a name="l00266"></a>00266                 
<a name="l00267"></a>00267                 <span class="keywordtype">double</span> rw = fw - iw;
<a name="l00268"></a>00268                 <span class="keywordtype">double</span> rh = fh - ih;
<a name="l00269"></a>00269                 <span class="comment">//double rd = fd - id;</span>
<a name="l00270"></a>00270                <span class="comment">// cout &lt;&lt; rw &lt;&lt; &quot; &quot; &lt;&lt; rh &lt;&lt; endl; </span>
<a name="l00271"></a>00271                 
<a name="l00272"></a>00272                 <a class="code" href="classvsr_1_1_m_v.html">Pnt</a> a = <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a>( <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a> ( iw, ih, 0 ) );
<a name="l00273"></a>00273                 <a class="code" href="classvsr_1_1_m_v.html">Pnt</a> d =<a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a>( <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a> ( iw, ih + 1, 0 ));
<a name="l00274"></a>00274                 <a class="code" href="classvsr_1_1_m_v.html">Pnt</a> b = <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a>( <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a> (  iw + 1, ih, 0 ));
<a name="l00275"></a>00275                 <a class="code" href="classvsr_1_1_m_v.html">Pnt</a> c = <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a>( <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a> (  iw + 1, ih + 1, 0 ));
<a name="l00276"></a>00276                 
<a name="l00277"></a>00277                 <span class="keywordflow">return</span> <a class="code" href="structvsr_1_1_ro.html#aaf99e1c2cdfbceb4080541016814ae5b">Ro::null</a>( Interp::surface&lt;Pnt&gt; (a,b,c,d, rw, rh) );       
<a name="l00278"></a>00278             }
<a name="l00279"></a>00279                         
<a name="l00280"></a>00280             <a class="code" href="namespacevsr.html#a2d05beb9721c5d9211b479af6d47222d">Pnt</a> pnt(<span class="keywordtype">double</span> u = 0, <span class="keywordtype">double</span> v = 0, <span class="keywordtype">double</span> w = 0){
<a name="l00281"></a>00281                 <span class="keywordtype">double</span> x = -<a class="code" href="classvsr_1_1_lattice.html#abd26d1837e90caa2d074ac5ef9a13d0c">ow</a>() + <a class="code" href="classvsr_1_1_lattice.html#af30c035b6ca13564a47616df97dcdefc">tw</a>() * u;
<a name="l00282"></a>00282                 <span class="keywordtype">double</span> y = -<a class="code" href="classvsr_1_1_lattice.html#a9c3d0411d400973f2888dca156a6e6db">oh</a>() + <a class="code" href="classvsr_1_1_lattice.html#afe2f9bef86a1be6f7224a7e21541eb59">th</a>() * v;
<a name="l00283"></a>00283                 <span class="keywordtype">double</span> z = <a class="code" href="classvsr_1_1_lattice.html#a9397b69714d0628457143d47f11b2d89">od</a>() - <a class="code" href="classvsr_1_1_lattice.html#a82795bf5b9cea94e18a3795e73b0d9b6">td</a>() * <a class="code" href="classvsr_1_1_lattice.html#ae377e62dbbed1f950bd900c34b30fb89" title="get width">w</a>;
<a name="l00284"></a>00284                 <span class="keywordflow">return</span> <a class="code" href="structvsr_1_1_ro.html#aaf99e1c2cdfbceb4080541016814ae5b">Ro::null</a>(x,y,z);
<a name="l00285"></a>00285             }
<a name="l00286"></a>00286             
<a name="l00288"></a>00288                         <a class="code" href="namespacevsr.html#a0d061c30ac198a710a1b92dd8b343273">Vec</a> <a class="code" href="classvsr_1_1_lattice.html#a543ff21275a243e3509d5ed8db709a6f">offset</a>(<span class="keyword">const</span> <a class="code" href="namespacevsr.html#a2d05beb9721c5d9211b479af6d47222d">Pnt</a>&amp; p);
<a name="l00289"></a>00289                         
<a name="l00291"></a>00291                         T <a class="code" href="classvsr_1_1_lattice.html#a39c3bb568ae14e62a12df60e0c99e3f3">euler</a> ( <span class="keyword">const</span> <a class="code" href="namespacevsr.html#a2d05beb9721c5d9211b479af6d47222d">Pnt</a>&amp; ) <span class="keyword">const</span>;
<a name="l00293"></a>00293                         T <a class="code" href="classvsr_1_1_lattice.html#a9f4b54f3119c814bac528d465b086a69">eulerPrev</a> ( <span class="keyword">const</span> <a class="code" href="namespacevsr.html#a2d05beb9721c5d9211b479af6d47222d">Pnt</a>&amp; ) <span class="keyword">const</span>;
<a name="l00295"></a><a class="code" href="classvsr_1_1_lattice.html#a01621007f7e31888cb0dd83de6772a9e">00295</a>                         T <a class="code" href="classvsr_1_1_lattice.html#a01621007f7e31888cb0dd83de6772a9e">sumNbrs</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>) { T tdx; <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; 7; ++i){ <span class="keywordflow">if</span> (mNbr[idx][i] != -1 ) tdx += mData[ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>][i] ]; }  <span class="keywordflow">return</span> tdx; }
<a name="l00297"></a><a class="code" href="classvsr_1_1_lattice.html#a3a3d03eb678949d32b0e9ae033776602">00297</a>                         T <a class="code" href="classvsr_1_1_lattice.html#a3a3d03eb678949d32b0e9ae033776602">sumNbrsPrev</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>) { T tdx; <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; 7; ++i){ <span class="keywordflow">if</span> (mNbr[idx][i] != -1 ) tdx += mPrev[ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>][i] ]; } <span class="keywordflow">return</span> tdx; }
<a name="l00298"></a>00298                         
<a name="l00300"></a>00300                         <span class="keyword">static</span> T <a class="code" href="classvsr_1_1_lattice.html#a01621007f7e31888cb0dd83de6772a9e">sumNbrs</a>(T * <a class="code" href="classvsr_1_1_lattice.html#ac59d9a773db6eaca5875c270325ed407">data</a>, <a class="code" href="classvsr_1_1_nbr.html">Nbr</a> * nb, <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>) ;
<a name="l00301"></a>00301         
<a name="l00303"></a>00303                         <span class="keyword">static</span> T <a class="code" href="classvsr_1_1_lattice.html#a88ecc6cd8bbe34408d337c5046c42ec5">diffNbrs</a>(T * <a class="code" href="classvsr_1_1_lattice.html#ac59d9a773db6eaca5875c270325ed407">data</a>, <a class="code" href="classvsr_1_1_nbr.html">Nbr</a> * nb, <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>) ;
<a name="l00304"></a>00304                         <span class="keyword">static</span> T diffXNbrs(T * <a class="code" href="classvsr_1_1_lattice.html#ac59d9a773db6eaca5875c270325ed407">data</a>, <a class="code" href="classvsr_1_1_nbr.html">Nbr</a> * nb, <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>) ;
<a name="l00305"></a>00305                         <span class="keyword">static</span> T diffYNbrs(T * <a class="code" href="classvsr_1_1_lattice.html#ac59d9a773db6eaca5875c270325ed407">data</a>, <a class="code" href="classvsr_1_1_nbr.html">Nbr</a> * nb, <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>) ;
<a name="l00306"></a>00306                         <span class="keyword">static</span> T diffZNbrs(T * <a class="code" href="classvsr_1_1_lattice.html#ac59d9a773db6eaca5875c270325ed407">data</a>, <a class="code" href="classvsr_1_1_nbr.html">Nbr</a> * nb, <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>) ;
<a name="l00307"></a>00307 
<a name="l00309"></a>00309                         <span class="keyword">static</span> <span class="keywordtype">double</span> <a class="code" href="classvsr_1_1_lattice.html#a7d3da0e8c01c5b97a1b89603dfb48883">tensNbrs</a>(T * <a class="code" href="classvsr_1_1_lattice.html#ac59d9a773db6eaca5875c270325ed407">data</a>, <a class="code" href="classvsr_1_1_nbr.html">Nbr</a> * nb, <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>) ;
<a name="l00310"></a>00310                         
<a name="l00312"></a>00312                         <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt;
<a name="l00313"></a>00313                         <span class="keyword">static</span> T <a class="code" href="classvsr_1_1_lattice.html#a39c3bb568ae14e62a12df60e0c99e3f3">euler</a>(<span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice&lt; S &gt;</a> &amp; f, T * <a class="code" href="classvsr_1_1_lattice.html#ac59d9a773db6eaca5875c270325ed407">data</a>, <a class="code" href="classvsr_1_1_m_v.html">Pnt</a>&amp; p) ;
<a name="l00314"></a>00314 
<a name="l00316"></a>00316                         <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt;
<a name="l00317"></a>00317                         <span class="keyword">static</span> T <a class="code" href="classvsr_1_1_lattice.html#a21027a9b207f10dfa399454cdf857bf3">localEuler</a>(<span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice&lt; S &gt;</a> &amp; f, T * <a class="code" href="classvsr_1_1_lattice.html#ac59d9a773db6eaca5875c270325ed407">data</a>, <a class="code" href="classvsr_1_1_m_v.html">Pnt</a>&amp; p) ;
<a name="l00318"></a>00318                         
<a name="l00320"></a><a class="code" href="classvsr_1_1_lattice.html#ab5da480b3c1954e7d53edc853879949b">00320</a>                         T <a class="code" href="classvsr_1_1_lattice.html#ab5da480b3c1954e7d53edc853879949b">diffNbrs</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>) { 
<a name="l00321"></a>00321                                 T tdx; 
<a name="l00322"></a>00322                                 tdx += mData[ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>].xr ] - mData [ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>].xl ]; <span class="comment">//xr - xl</span>
<a name="l00323"></a>00323                                 tdx += mData[ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>].yt ] - mData [ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>].yb ]; <span class="comment">//yt - yb</span>
<a name="l00324"></a>00324                                 tdx += mData[ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>].zb ] - mData [ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>].zf ]; <span class="comment">//zb - zf</span>
<a name="l00325"></a>00325                                 <span class="keywordflow">return</span> tdx;
<a name="l00326"></a>00326                         }
<a name="l00327"></a>00327                         
<a name="l00329"></a><a class="code" href="classvsr_1_1_lattice.html#a315a0e862d56f1d8621946da2ac1ced8">00329</a>                         T <a class="code" href="classvsr_1_1_lattice.html#a315a0e862d56f1d8621946da2ac1ced8">diffNbrsPrev</a>(<span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>) { 
<a name="l00330"></a>00330                                 T tdx; 
<a name="l00331"></a>00331                                 tdx += mPrev[ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>][2] ] - mPrev[ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>][1] ]; 
<a name="l00332"></a>00332                                 tdx += mPrev[ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>][4] ] - mPrev[ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>][3] ]; 
<a name="l00333"></a>00333                                 tdx += mPrev[ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>][6] ] - mPrev[ mNbr[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>][5] ];
<a name="l00334"></a>00334                                 <span class="keywordflow">return</span> tdx;
<a name="l00335"></a>00335                         }
<a name="l00336"></a>00336                         
<a name="l00338"></a><a class="code" href="classvsr_1_1_lattice.html#a6c3699c729d48b12b3c68e8d3d9b2fed">00338</a>                         <a class="code" href="classvsr_1_1_vxl.html">Vxl</a> <a class="code" href="classvsr_1_1_lattice.html#a6c3699c729d48b12b3c68e8d3d9b2fed">vxl</a>( <a class="code" href="classvsr_1_1_m_v.html">Vec</a> v )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classvsr_1_1_lattice.html#ac9ed3c0ce10a532873a1781cea9c9ef2">_vxlOfVec</a>( v, *<span class="keyword">this</span> ); }
<a name="l00340"></a><a class="code" href="classvsr_1_1_lattice.html#a08636cc0e951621b38ae6f8c64398a1a">00340</a>                         <a class="code" href="classvsr_1_1_vxl.html">Vxl</a> <a class="code" href="classvsr_1_1_lattice.html#a08636cc0e951621b38ae6f8c64398a1a">vxlPnt</a>( <a class="code" href="classvsr_1_1_m_v.html">Pnt</a> p )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classvsr_1_1_lattice.html#a93525a3a9a3ef5e28f03e028f4833074">_vxlOfPnt</a>( p, *<span class="keyword">this</span> ); }                     
<a name="l00341"></a>00341                         
<a name="l00343"></a>00343                         <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt; 
<a name="l00344"></a>00344                         <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a89bcfc67612783002e054fc5bf453a7b">_indexOf</a>(<span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">int</span> d, <span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice&lt;S&gt;</a>&amp; f);
<a name="l00346"></a><a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">00346</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>( <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">int</span> d )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classvsr_1_1_lattice.html#a89bcfc67612783002e054fc5bf453a7b">_indexOf</a>(w,h,d,*<span class="keyword">this</span>); }
<a name="l00347"></a>00347                                                 
<a name="l00348"></a>00348                         <span class="keyword">static</span> <a class="code" href="classvsr_1_1_vxl.html">Vxl</a> <a class="code" href="classvsr_1_1_lattice.html#a24ec792827fe12954e7d9062009035b7">vxl</a> ( <span class="keyword">const</span> <a class="code" href="classvsr_1_1_m_v.html">Vec</a>&amp; v, <span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice</a>&amp; f);                       
<a name="l00349"></a>00349                         <span class="keyword">static</span> <a class="code" href="classvsr_1_1_nbr.html">Nbr</a> nbr ( <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>, <span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice</a>&amp; f, <span class="keywordtype">int</span> typ = 0);       
<a name="l00350"></a>00350                         <span class="keyword">static</span> <a class="code" href="classvsr_1_1_nbr.html">Nbr</a> vnbr ( <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>, <span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice</a>&amp; f, <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a64681e5cac4bc2567b449697c4fc6bf9">type</a> = 0); 
<a name="l00351"></a>00351                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a2a3562a07fde0de467a8a167d74079cc" title="Bitflag of position.">faceOrEdge</a>( <a class="code" href="classvsr_1_1_nbr.html">Nbr</a> nb);                        
<a name="l00352"></a>00352                         
<a name="l00354"></a>00354                         <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt; 
<a name="l00355"></a>00355                         <span class="keyword">static</span> <a class="code" href="classvsr_1_1_m_v.html">Vec</a> <a class="code" href="classvsr_1_1_lattice.html#a973bbdafd3223d0cd7734de0475cca78">limit</a>( <span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice&lt; S &gt;</a> &amp; f, <span class="keyword">const</span> <a class="code" href="classvsr_1_1_m_v.html">Pnt</a>&amp; p);
<a name="l00356"></a>00356 
<a name="l00357"></a>00357                         <span class="keywordtype">bool</span> <a class="code" href="classvsr_1_1_lattice.html#afe45dea5db35320a0cbfbe7f3ac7fdd2" title="is Vec v inside bounds?">inBounds</a>( <a class="code" href="classvsr_1_1_m_v.html">Vec</a> v) <span class="keyword">const</span>;            
<a name="l00358"></a>00358 
<a name="l00359"></a><a class="code" href="classvsr_1_1_lattice.html#ae377e62dbbed1f950bd900c34b30fb89">00359</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#ae377e62dbbed1f950bd900c34b30fb89" title="get width">w</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mWidth; }        
<a name="l00360"></a><a class="code" href="classvsr_1_1_lattice.html#a51b0756a11687bb9f69f886ed90ff68a">00360</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a51b0756a11687bb9f69f886ed90ff68a" title="get height">h</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mHeight; }       
<a name="l00361"></a><a class="code" href="classvsr_1_1_lattice.html#a5ee2e0d41d22764521a812a82074886b">00361</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a5ee2e0d41d22764521a812a82074886b" title="get depth">d</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mDepth; }        
<a name="l00362"></a>00362                         
<a name="l00364"></a><a class="code" href="classvsr_1_1_lattice.html#a1ed10107c28f1bc09c5f10e980b8545d">00364</a>                         <span class="keywordtype">float</span> <a class="code" href="classvsr_1_1_lattice.html#a1ed10107c28f1bc09c5f10e980b8545d">spacing</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mSpacing; } 
<a name="l00366"></a><a class="code" href="classvsr_1_1_lattice.html#ac8abe8c101f58a21bc20047682766517">00366</a>                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#ac8abe8c101f58a21bc20047682766517">spacing</a>(<span class="keywordtype">double</span> s) { mSpacing = s; <a class="code" href="classvsr_1_1_lattice.html#a9c70f331ac4bf55b130caec17eeb670d">init</a>(); }
<a name="l00367"></a>00367                                         
<a name="l00368"></a>00368                         <span class="comment">/* Totals and Offsets From Center */</span>
<a name="l00370"></a><a class="code" href="classvsr_1_1_lattice.html#af30c035b6ca13564a47616df97dcdefc">00370</a>                         <span class="keywordtype">float</span> <a class="code" href="classvsr_1_1_lattice.html#af30c035b6ca13564a47616df97dcdefc">tw</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (mWidth-1) * mSpacing; }
<a name="l00372"></a><a class="code" href="classvsr_1_1_lattice.html#abd26d1837e90caa2d074ac5ef9a13d0c">00372</a>                         <span class="keywordtype">float</span> <a class="code" href="classvsr_1_1_lattice.html#abd26d1837e90caa2d074ac5ef9a13d0c">ow</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classvsr_1_1_lattice.html#af30c035b6ca13564a47616df97dcdefc">tw</a>() / 2.0 ; }
<a name="l00374"></a><a class="code" href="classvsr_1_1_lattice.html#afe2f9bef86a1be6f7224a7e21541eb59">00374</a>                         <span class="keywordtype">float</span> <a class="code" href="classvsr_1_1_lattice.html#afe2f9bef86a1be6f7224a7e21541eb59">th</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (mHeight-1) * mSpacing; }
<a name="l00376"></a><a class="code" href="classvsr_1_1_lattice.html#a9c3d0411d400973f2888dca156a6e6db">00376</a>                         <span class="keywordtype">float</span> <a class="code" href="classvsr_1_1_lattice.html#a9c3d0411d400973f2888dca156a6e6db">oh</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classvsr_1_1_lattice.html#afe2f9bef86a1be6f7224a7e21541eb59">th</a>() / 2.0 ; }
<a name="l00378"></a><a class="code" href="classvsr_1_1_lattice.html#a82795bf5b9cea94e18a3795e73b0d9b6">00378</a>                         <span class="keywordtype">float</span> <a class="code" href="classvsr_1_1_lattice.html#a82795bf5b9cea94e18a3795e73b0d9b6">td</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (mDepth-1) * mSpacing; }
<a name="l00380"></a><a class="code" href="classvsr_1_1_lattice.html#a9397b69714d0628457143d47f11b2d89">00380</a>                         <span class="keywordtype">float</span> <a class="code" href="classvsr_1_1_lattice.html#a9397b69714d0628457143d47f11b2d89">od</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classvsr_1_1_lattice.html#a82795bf5b9cea94e18a3795e73b0d9b6">td</a>() / 2.0 ; }<span class="comment">//0;}//</span>
<a name="l00381"></a>00381                         
<a name="l00383"></a><a class="code" href="classvsr_1_1_lattice.html#aa7980f86fab67344ef05023b85cb3c7b">00383</a>                         <span class="keywordtype">float</span> <a class="code" href="classvsr_1_1_lattice.html#aa7980f86fab67344ef05023b85cb3c7b">px</a>(<span class="keywordtype">int</span> i)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> -<a class="code" href="classvsr_1_1_lattice.html#abd26d1837e90caa2d074ac5ef9a13d0c">ow</a>() + (mSpacing * i); }
<a name="l00385"></a><a class="code" href="classvsr_1_1_lattice.html#a379c9936aaabee457da8ba07ca49eb9c">00385</a>                         <span class="keywordtype">float</span> <a class="code" href="classvsr_1_1_lattice.html#a379c9936aaabee457da8ba07ca49eb9c">py</a>(<span class="keywordtype">int</span> j)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> -<a class="code" href="classvsr_1_1_lattice.html#a9c3d0411d400973f2888dca156a6e6db">oh</a>() + (mSpacing * j); }
<a name="l00387"></a><a class="code" href="classvsr_1_1_lattice.html#a23f71aa3f59b772413330dd0784737a1">00387</a>                         <span class="keywordtype">float</span> <a class="code" href="classvsr_1_1_lattice.html#a23f71aa3f59b772413330dd0784737a1">pz</a>(<span class="keywordtype">int</span> k)<span class="keyword"> const </span>{ <span class="keywordflow">return</span>  <a class="code" href="classvsr_1_1_lattice.html#a9397b69714d0628457143d47f11b2d89">od</a>() - (mSpacing * k); }
<a name="l00388"></a>00388                 
<a name="l00389"></a><a class="code" href="classvsr_1_1_lattice.html#aaed86caf4975141006fb894b170489e4">00389</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#aaed86caf4975141006fb894b170489e4" title="Number of Points.">num</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mNum; }                                        
<a name="l00390"></a><a class="code" href="classvsr_1_1_lattice.html#a85f391c3bbd7659c9e3b186ef51e8505">00390</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a85f391c3bbd7659c9e3b186ef51e8505" title="Number of Voxels.">numVxl</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mNumVxl; }                          
<a name="l00391"></a><a class="code" href="classvsr_1_1_lattice.html#aed6d76df3e8c363a549deac06b26791f">00391</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#aed6d76df3e8c363a549deac06b26791f" title="Number of Edge Points.">numEdge</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mNumEdge; }                        
<a name="l00392"></a><a class="code" href="classvsr_1_1_lattice.html#ad780ecb17d0530ad4dcf8ed58456d8d3">00392</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#ad780ecb17d0530ad4dcf8ed58456d8d3" title="Number of Face Points.">numFace</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mNumFace; }                        
<a name="l00393"></a><a class="code" href="classvsr_1_1_lattice.html#a6a006a6b6416422ec60e990c612b2a26">00393</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a6a006a6b6416422ec60e990c612b2a26" title="Number of Edge Voxels.">numEdgeVxl</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mEdgeVxl.size(); }      
<a name="l00394"></a><a class="code" href="classvsr_1_1_lattice.html#a0acb38530b802d47473972485e44fc7f">00394</a>                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a0acb38530b802d47473972485e44fc7f" title="Number of Face Voxels.">numFaceVxl</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> mFaceVxl.size(); }      
<a name="l00395"></a>00395                         
<a name="l00397"></a>00397                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#af67b43f155bea5130535616a67d00f8d">jitter</a>(<span class="keywordtype">double</span> x = .5, <span class="keywordtype">double</span> y = .5, <span class="keywordtype">double</span> z = .5 );
<a name="l00398"></a>00398                         <span class="keywordtype">void</span> jitterGrid(<span class="keywordtype">double</span> s = .5);
<a name="l00399"></a>00399 
<a name="l00401"></a>00401                         <a class="code" href="classvsr_1_1_lattice.html">Lattice</a> <a class="code" href="classvsr_1_1_lattice.html#a521845d9633d937734d673daae005d23">convolve</a>(<span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice</a>&amp;);                       
<a name="l00402"></a>00402                         
<a name="l00404"></a><a class="code" href="classvsr_1_1_lattice.html#a1eb3b576efe08739583c0ac20d8f380c">00404</a>                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a1eb3b576efe08739583c0ac20d8f380c">source</a>(T val, <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>) { mData[<a class="code" href="classvsr_1_1_lattice.html#adb69198162bacf492faea0ceff8e497c">idx</a>] += val; }
<a name="l00405"></a>00405                         
<a name="l00407"></a>00407                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a4a3f7d255b8f17bc6064292409872d17">diffuse</a>(<span class="keywordtype">double</span> diff,  <span class="keywordtype">double</span> dt, <span class="keywordtype">bool</span> bounded, <span class="keywordtype">bool</span> neg);
<a name="l00409"></a>00409                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a9ad3a6df7ed2d9cf8f02916b5c988221">diffusefwd</a>(<span class="keywordtype">double</span> rate, <span class="keywordtype">bool</span> bounded = 1);
<a name="l00410"></a>00410                         
<a name="l00412"></a>00412                         <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt; 
<a name="l00413"></a>00413                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a8a86e7c02c394be8a0336981b7454fa3">advect</a>(  <a class="code" href="classvsr_1_1_lattice.html">Lattice &lt; S &gt;</a> &amp; v , <span class="keywordtype">double</span> dt, <span class="keywordtype">bool</span> bounded, <span class="keywordtype">bool</span> neg);
<a name="l00415"></a>00415                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a0564334d264ee20749a2d838da4b52c6">project</a>(<span class="keywordtype">int</span> it = 20);
<a name="l00417"></a>00417                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_frame.html#ac43fc7e8f62bba3fa813fb3ad95212d6">bound</a>(T * <a class="code" href="classvsr_1_1_lattice.html#ac59d9a773db6eaca5875c270325ed407">data</a>, <span class="keywordtype">bool</span> neg);
<a name="l00418"></a>00418                         
<a name="l00420"></a>00420                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#aed19b9829be0cfef0f23852d4a3eae7a">fluid</a>(<span class="keywordtype">double</span> diff, <span class="keywordtype">double</span> adv, <span class="keywordtype">double</span> dt);
<a name="l00421"></a>00421                         
<a name="l00423"></a>00423                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#acae7193cc3e6867f09acde8e9f77f6c7">verlet</a>();
<a name="l00424"></a>00424                         
<a name="l00426"></a>00426                         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a64681e5cac4bc2567b449697c4fc6bf9">type</a>() <span class="keyword">const</span>;
<a name="l00427"></a>00427 
<a name="l00428"></a>00428                         <span class="keyword">virtual</span> <span class="keywordtype">void</span> drawLoop();
<a name="l00429"></a>00429                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#af0c78f36cb4df72b89e153874c06a3dd" title="Push to Grid Position, then Draw Data.">drawPush</a>();        
<a name="l00430"></a>00430                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#ad1c4aa3ec54921702dc1012db1e7951e" title="Draw base grid (as spheres with radius = spacing)">drawGrid</a>();        
<a name="l00431"></a>00431                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a8fb5d84983c6b710a742b6cea16b31b8" title="Draw Mesh with GL Quads, using data (default) or base grid points.">drawMesh</a>(<span class="keywordtype">int</span> n = 0, <span class="keywordtype">bool</span> <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a> = 0);        
<a name="l00432"></a>00432                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a054b3c59319b99f160efb595367595a4" title="Draw Mesh using Quads or Lines, using data or base grid points and loc alg.">drawMeshLoc</a>(<span class="keywordtype">int</span> n = 0, <span class="keywordtype">bool</span> <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a> = 0);     
<a name="l00433"></a>00433                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a4e199b8dad247f5b5c6a316195c23567" title="Draw Mesh using Quads or Lines, using data or base grid points and loc alg.">drawMeshAllLoc</a>(<span class="keywordtype">int</span> n = 0, <span class="keywordtype">bool</span> <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a> = 0);  
<a name="l00434"></a>00434                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#ab6435dc47e3d459bd159ffc6101831c4" title="Draw Voxel as quads using grid or data.">drawVoxel</a>(<a class="code" href="classvsr_1_1_vxl.html">Vxl</a>, <span class="keywordtype">int</span> style = 1, <span class="keywordtype">bool</span> <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a>=1);        
<a name="l00435"></a>00435                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a535fd2d7e188cbb5eed0f8d43b30ee22" title="Draw Voxel for round data elements (using Ro::cen)">drawVoxelLoc</a>(<a class="code" href="classvsr_1_1_vxl.html">Vxl</a>, <span class="keywordtype">bool</span> bAll = 0, <span class="keywordtype">int</span> style = 1, <span class="keywordtype">bool</span> <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a>=1); 
<a name="l00436"></a>00436 <span class="comment">//                      void drawVoxelLocAllSides(Vxl, int style = 1, bool grid=1); ///&lt; Draw Voxel for round data elements (using Ro::cen) all Sides</span>
<a name="l00437"></a>00437                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a9d0443a84d293b5531655f01dd6bd445" title="draws inner data only">drawBounded</a>();     
<a name="l00438"></a>00438                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a47900306832a0dfb06d6d0acbce45a9f" title="draw inner data only pushed to grid position">drawBoundedPush</a>(); 
<a name="l00439"></a>00439                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#ab9638aa17ea31ca483f846ceb4be6d3d" title="draw faces only of grid or data">drawFaces</a>(<span class="keywordtype">bool</span> <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a> =0);   
<a name="l00440"></a>00440                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a8d5b3c583555a5c465859f7f8a8a2d48" title="draw edges only of grid or data">drawEdges</a>(<span class="keywordtype">bool</span> <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a> =0);   
<a name="l00441"></a>00441                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a0dc10710be2942a73ee58e5301a2ba97" title="draw face of grid or data using GL_LINES">drawFaceLines</a>(<span class="keywordtype">bool</span> <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a>=0); 
<a name="l00442"></a>00442                         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html#a4660bebd2796e97172af4204987187fc" title="draw edges of grid or data using GL_LINES">drawEdgeLines</a>(<span class="keywordtype">bool</span> <a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a>=0); 
<a name="l00443"></a>00443                         
<a name="l00444"></a>00444                         <span class="keywordtype">bool</span> clickedData(<span class="keywordtype">int</span> i, <a class="code" href="classvsr_1_1_m_v.html">Dll</a> <a class="code" href="classvsr_1_1_frame.html#acfd841636abdd2ac35ef19c1fd611939">dll</a>);
<a name="l00445"></a>00445                         
<a name="l00446"></a>00446                         <span class="keyword">friend</span> ostream&amp; operator &lt;&lt; &lt;&gt; (ostream&amp; os, <span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice&lt; T &gt;</a>&amp;);
<a name="l00447"></a>00447         
<a name="l00448"></a>00448         };
<a name="l00449"></a>00449         
<a name="l00450"></a>00450         <span class="keyword">template</span> &lt;<span class="keyword">class</span> T &gt;             
<a name="l00451"></a>00451         ostream&amp; operator &lt;&lt; (ostream&amp; os, const Lattice&lt; T &gt;&amp; f){      
<a name="l00452"></a>00452                 os &lt;&lt; f[0].name() &lt;&lt; <span class="stringliteral">&quot; lattice...\nwidth: &quot;</span> &lt;&lt; f.w() 
<a name="l00453"></a>00453                 &lt;&lt; <span class="stringliteral">&quot;\t height: &quot;</span> &lt;&lt; f.h() &lt;&lt; <span class="stringliteral">&quot;\t depth: &quot;</span> &lt;&lt; f.d() &lt;&lt; endl;
<a name="l00454"></a>00454                 <span class="keywordflow">return</span> os;      
<a name="l00455"></a>00455         }
<a name="l00456"></a>00456 
<a name="l00457"></a>00457     <span class="comment">//tmp defs to prevent compilation errors</span>
<a name="l00458"></a><a class="code" href="classvsr_1_1_lattice.html#a64681e5cac4bc2567b449697c4fc6bf9">00458</a>     <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a64681e5cac4bc2567b449697c4fc6bf9">Lattice&lt;T&gt; :: type</a>()<span class="keyword"> const </span>{<span class="keywordflow">return</span> mData[0].idx; } 
<a name="l00459"></a>00459     <span class="keyword">template</span>&lt;&gt; <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html#a64681e5cac4bc2567b449697c4fc6bf9">Lattice&lt; Frame &gt; ::type</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> 0; }
<a name="l00460"></a>00460     <span class="keyword">template</span>&lt; &gt; <span class="keywordtype">void</span> Lattice &lt;Frame&gt; ::diffusefwd(<span class="keywordtype">double</span> d, <span class="keywordtype">bool</span> bounded){} 
<a name="l00461"></a>00461     <span class="keyword">template</span>&lt; &gt; <span class="keywordtype">void</span> Lattice &lt;Frame&gt; ::diffuse(<span class="keywordtype">double</span> d, <span class="keywordtype">double</span> dt, <span class="keywordtype">bool</span> bounded, <span class="keywordtype">bool</span> neg){}
<a name="l00462"></a>00462     <span class="keyword">template</span>&lt; &gt; <span class="keywordtype">void</span> Lattice &lt;Frame&gt; ::project(<span class="keywordtype">int</span> it){}
<a name="l00463"></a>00463     <span class="keyword">template</span>&lt; &gt; <span class="keywordtype">void</span> Lattice &lt;Frame&gt; ::bound(Frame * pdata, <span class="keywordtype">bool</span> neg){}
<a name="l00464"></a>00464     <span class="keyword">template</span>&lt; &gt; <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt; <span class="keywordtype">void</span> Lattice &lt;Frame&gt; :: advect( Lattice &lt; S &gt; &amp; v, <span class="keywordtype">double</span> dt, <span class="keywordtype">bool</span> bounded, <span class="keywordtype">bool</span> neg ) {}
<a name="l00465"></a>00465     
<a name="l00466"></a>00466     <span class="keyword">template</span>&lt;&gt; Frame <a class="code" href="classvsr_1_1_lattice.html#afd9db3eb67943accbb7facef53d9cd74">Lattice&lt; Frame &gt; :: surf</a>(<span class="keywordtype">double</span> u, <span class="keywordtype">double</span> v){
<a name="l00467"></a>00467             
<a name="l00468"></a>00468         <span class="keywordtype">double</span> pw = 1.0 / ( mWidth-1);
<a name="l00469"></a>00469         <span class="keywordtype">double</span> ph = 1.0/ ( mHeight-1);
<a name="l00470"></a>00470         <span class="comment">//double pd = 1.0 / mDepth;</span>
<a name="l00471"></a>00471         
<a name="l00472"></a>00472         <span class="keywordtype">double</span> fw = u / pw;
<a name="l00473"></a>00473         <span class="keywordtype">double</span> fh = v / ph;
<a name="l00474"></a>00474         <span class="comment">//double fd = w / pd;</span>
<a name="l00475"></a>00475         
<a name="l00476"></a>00476         <span class="keywordtype">int</span> iw = floor ( fw );
<a name="l00477"></a>00477         <span class="keywordtype">int</span> ih = floor ( fh );
<a name="l00478"></a>00478         <span class="comment">//int id = floor ( fd );</span>
<a name="l00479"></a>00479        <span class="comment">// cout &lt;&lt; iw &lt;&lt; &quot; &quot; &lt;&lt; ih &lt;&lt; endl; </span>
<a name="l00480"></a>00480         
<a name="l00481"></a>00481         <span class="keywordtype">double</span> rw = fw - iw;
<a name="l00482"></a>00482         <span class="keywordtype">double</span> rh = fh - ih;
<a name="l00483"></a>00483         <span class="comment">//double rd = fd - id;</span>
<a name="l00484"></a>00484        <span class="comment">// cout &lt;&lt; rw &lt;&lt; &quot; &quot; &lt;&lt; rh &lt;&lt; endl; </span>
<a name="l00485"></a>00485         
<a name="l00486"></a>00486         <a class="code" href="namespacevsr.html#a6c6892b7aec25cfb16492501e2e35b11">Dll</a> a = at ( iw, ih, 0 ).dll();
<a name="l00487"></a>00487         <a class="code" href="namespacevsr.html#a6c6892b7aec25cfb16492501e2e35b11">Dll</a> d = at ( iw, ih + 1, 0 ).dll();
<a name="l00488"></a>00488         <a class="code" href="namespacevsr.html#a6c6892b7aec25cfb16492501e2e35b11">Dll</a> b = at ( iw + 1, ih, 0 ).dll();
<a name="l00489"></a>00489         <a class="code" href="namespacevsr.html#a6c6892b7aec25cfb16492501e2e35b11">Dll</a> c = at ( iw + 1, ih + 1, 0 ).dll();
<a name="l00490"></a>00490                 
<a name="l00491"></a>00491         <span class="keywordflow">return</span> <a class="code" href="structvsr_1_1_gen.html#ae70e0f3ae87c6b17b50a2c17bf3473bd">Gen::mot</a>( Interp::surface&lt;Dll&gt; (a,b,c,d, rw, rh) );
<a name="l00492"></a>00492             
<a name="l00493"></a>00493     }
<a name="l00494"></a>00494 
<a name="l00495"></a>00495         <span class="comment">//move according to another Lattice field v</span>
<a name="l00496"></a>00496         <span class="keyword">template</span> &lt; <span class="keyword">class</span> T &gt; <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt;
<a name="l00497"></a><a class="code" href="classvsr_1_1_lattice.html#a8a86e7c02c394be8a0336981b7454fa3">00497</a>         <span class="keywordtype">void</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice &lt; T &gt;</a> :: advect( <a class="code" href="classvsr_1_1_lattice.html">Lattice &lt; S &gt;</a> &amp; v, <span class="keywordtype">double</span> dt, <span class="keywordtype">bool</span> bounded, <span class="keywordtype">bool</span> neg ) {
<a name="l00498"></a>00498                 
<a name="l00499"></a>00499                 <span class="comment">//for each cell we trace back a point through vector field v and collect interpolated info</span>
<a name="l00500"></a>00500                 <span class="comment">//currently assumes fields are same dimensions****</span>
<a name="l00501"></a>00501                 <a class="code" href="classvsr_1_1_m_v.html">Pnt</a> s; <a class="code" href="classvsr_1_1_vxl.html">Vxl</a> vxl;
<a name="l00502"></a>00502                 
<a name="l00503"></a>00503 <span class="comment">//        typedef Generic (*MonoFunc)(const Generic&amp;);</span>
<a name="l00504"></a>00504 <span class="comment">//              MonoFunc func;</span>
<a name="l00505"></a>00505 <span class="comment">//              switch( v.type() ) {</span>
<a name="l00506"></a>00506 <span class="comment">//                      case VEC:       func = Gen::trs&lt;&gt;;</span>
<a name="l00507"></a>00507 <span class="comment">//                              break;</span>
<a name="l00508"></a>00508 <span class="comment">//                      case BIV:       func = Gen::rot&lt;Biv&gt;;</span>
<a name="l00509"></a>00509 <span class="comment">//                              break;</span>
<a name="l00510"></a>00510 <span class="comment">//                      case DLL:       func = Gen::mot_dll;</span>
<a name="l00511"></a>00511 <span class="comment">//                              break;</span>
<a name="l00512"></a>00512 <span class="comment">//                      case TNV:       func = Gen::trv;</span>
<a name="l00513"></a>00513 <span class="comment">//                              break;</span>
<a name="l00514"></a>00514 <span class="comment">//                      case MNK:       func = Gen::dil;</span>
<a name="l00515"></a>00515 <span class="comment">//                              break;</span>
<a name="l00516"></a>00516 <span class="comment">//                      case DRV:       func = Gen::trs;</span>
<a name="l00517"></a>00517 <span class="comment">//                              break;</span>
<a name="l00518"></a>00518 <span class="comment">//              }</span>
<a name="l00519"></a>00519 
<a name="l00520"></a>00520                 <span class="keywordflow">if</span>(bounded){
<a name="l00521"></a>00521         
<a name="l00522"></a>00522                         <span class="comment">//case 0:</span>
<a name="l00523"></a>00523                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num(); ++i){
<a name="l00524"></a>00524                                 <span class="comment">//create backwards transformation that location from v (type dependent)</span>
<a name="l00525"></a>00525                                 s = Op::sp( grid(i), <a class="code" href="structvsr_1_1_gen.html#a68e9053727c0901839b78cc94710839f">Gen::trs</a>( v[i] * -dt ) );
<a name="l00526"></a>00526                                 mData[i] = euler(v, prev(), s); <span class="comment">//eulerPrev(s);</span>
<a name="l00527"></a>00527                         }
<a name="l00528"></a>00528                         <span class="comment">//break;</span>
<a name="l00529"></a>00529                         
<a name="l00530"></a>00530         }
<a name="l00531"></a>00531         <span class="keywordflow">else</span> {<span class="comment">//case 1:</span>
<a name="l00532"></a>00532                         
<a name="l00533"></a>00533                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> m = 1; m &lt; mWidth-1; ++m){
<a name="l00534"></a>00534                                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 1; j &lt; mHeight-1; ++j){
<a name="l00535"></a>00535                                         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 1; k &lt; mDepth-1; ++k){
<a name="l00536"></a>00536                                                 <span class="keywordtype">int</span> i = idx(m,j,k);
<a name="l00537"></a>00537                                                 <span class="comment">//create backwards transformation that location from v (type dependent)                                         </span>
<a name="l00538"></a>00538 <span class="comment">//                                              else if ( v.type() == _SCA) s = grid(i) * v[i] * -dt;</span>
<a name="l00539"></a>00539 
<a name="l00540"></a>00540                                                 s = Op::sp( grid(i), <a class="code" href="structvsr_1_1_gen.html#a68e9053727c0901839b78cc94710839f">Gen::trs</a>( v[i] * -dt ) );                                          
<a name="l00541"></a>00541                                                 mData[i] = euler(v, prev(), s);
<a name="l00542"></a>00542                                         }
<a name="l00543"></a>00543                                 }
<a name="l00544"></a>00544                         }
<a name="l00545"></a>00545                         bound(mData, neg);      
<a name="l00546"></a>00546         }
<a name="l00547"></a>00547         }
<a name="l00548"></a>00548     
<a name="l00551"></a>00551 
<a name="l00552"></a>00552         <span class="keyword">template</span> &lt; <span class="keyword">class</span> T &gt; <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt; 
<a name="l00553"></a><a class="code" href="classvsr_1_1_lattice.html#a86b113596dac4e19eb78c0975340cae7">00553</a>         T <a class="code" href="classvsr_1_1_lattice.html">Lattice &lt; T &gt;</a> :: euler ( <span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice&lt; S &gt;</a> &amp; f, T * data, <a class="code" href="classvsr_1_1_m_v.html">Pnt</a>&amp; p ) { 
<a name="l00554"></a>00554 
<a name="l00555"></a>00555                 <span class="comment">//Limit of p in f</span>
<a name="l00556"></a>00556                 <a class="code" href="classvsr_1_1_m_v.html">Vec</a> v = limit(f,p);                                                     
<a name="l00557"></a>00557         <span class="comment">//Vxl of v in f</span>
<a name="l00558"></a>00558                 <a class="code" href="classvsr_1_1_vxl.html">Vxl</a> vxl = _vxlOfVec( v, f );
<a name="l00559"></a>00559         <span class="comment">//x,y,z distance from lower front corner of vxl</span>
<a name="l00560"></a>00560                 <a class="code" href="classvsr_1_1_m_v.html">Vec</a> tp = v - f.<a class="code" href="classvsr_1_1_lattice.html#a85532086719166cc74662088b0173a4c">grid</a>( vxl[0] ); 
<a name="l00561"></a>00561         <span class="comment">//Adjustment to Y direction and spacing</span>
<a name="l00562"></a>00562                 tp[2] *= -1;
<a name="l00563"></a>00563                 tp /= f.<a class="code" href="classvsr_1_1_lattice.html#a1ed10107c28f1bc09c5f10e980b8545d">spacing</a>();
<a name="l00564"></a>00564                 
<a name="l00565"></a>00565         
<a name="l00566"></a>00566                 <span class="keywordtype">double</span> x = tp[0]; <span class="keywordtype">double</span> xo = 1-x;
<a name="l00567"></a>00567                 <span class="keywordtype">double</span> y = tp[1]; <span class="keywordtype">double</span> yo = 1-y;
<a name="l00568"></a>00568                 <span class="keywordtype">double</span> z = tp[2]; <span class="keywordtype">double</span> zo = 1-z;
<a name="l00569"></a>00569                                 
<a name="l00570"></a>00570                 T tdx = (  ( data[ vxl.a ] * xo + data[vxl.b] * x ) * yo 
<a name="l00571"></a>00571                                  + ( data[ vxl.d ] * xo + data[vxl.c] * x ) * y   ) * zo
<a name="l00572"></a>00572                                  + ( ( data[ vxl.e ] * xo + data[vxl.f] * x ) * yo
<a name="l00573"></a>00573                                  + ( data[ vxl.h ] * xo + data[vxl.g] * x ) * y  ) * z; 
<a name="l00574"></a>00574                 
<a name="l00575"></a>00575                 <span class="keywordflow">return</span> tdx;<span class="comment">//Op::err( tdx ) ;</span>
<a name="l00576"></a>00576         }
<a name="l00577"></a>00577         
<a name="l00578"></a>00578         <span class="keyword">template</span> &lt; <span class="keyword">class</span> T &gt; <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt; 
<a name="l00579"></a><a class="code" href="classvsr_1_1_lattice.html#a21027a9b207f10dfa399454cdf857bf3">00579</a>         T <a class="code" href="classvsr_1_1_lattice.html">Lattice &lt; T &gt;</a> ::  localEuler ( <span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice&lt; S &gt;</a> &amp; f, T * data, <a class="code" href="classvsr_1_1_m_v.html">Pnt</a>&amp; tp ) { 
<a name="l00580"></a>00580                 
<a name="l00581"></a>00581                 <span class="keyword">static</span> <a class="code" href="classvsr_1_1_vxl.html">Vxl</a> vxl(0,1,2,3,4,5,6,7);
<a name="l00582"></a>00582                 
<a name="l00583"></a>00583                 <span class="keywordtype">double</span> x = tp[0]; <span class="keywordtype">double</span> xo = 1-x;
<a name="l00584"></a>00584                 <span class="keywordtype">double</span> y = tp[1]; <span class="keywordtype">double</span> yo = 1-y;
<a name="l00585"></a>00585                 <span class="keywordtype">double</span> z = tp[2]; <span class="keywordtype">double</span> zo = 1-z;                              
<a name="l00586"></a>00586                                 
<a name="l00587"></a>00587                 T tdx = (  ( data[ vxl.a ] * xo + data[vxl.b] * x ) * yo 
<a name="l00588"></a>00588                                  + ( data[ vxl.d ] * xo + data[vxl.c] * x ) * y   ) * zo
<a name="l00589"></a>00589                                  + ( ( data[ vxl.e ] * xo + data[vxl.f] * x ) * yo
<a name="l00590"></a>00590                                  + ( data[ vxl.h ] * xo + data[vxl.g] * x ) * y  ) * z; 
<a name="l00591"></a>00591                 
<a name="l00592"></a>00592                 <span class="keywordflow">return</span> tdx;<span class="comment">//Op::err( tdx ) ;</span>
<a name="l00593"></a>00593         }
<a name="l00594"></a>00594 
<a name="l00595"></a>00595 
<a name="l00596"></a>00596         <span class="keyword">template</span> &lt; <span class="keyword">class</span> T &gt; <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt; 
<a name="l00597"></a><a class="code" href="classvsr_1_1_lattice.html#a973bbdafd3223d0cd7734de0475cca78">00597</a>         <a class="code" href="classvsr_1_1_m_v.html">Vec</a> <a class="code" href="classvsr_1_1_lattice.html">Lattice &lt;  T &gt;</a> :: limit ( <span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice &lt; S &gt;</a> &amp; f, <span class="keyword">const</span> <a class="code" href="classvsr_1_1_m_v.html">Pnt</a>&amp; p){
<a name="l00598"></a>00598                 <a class="code" href="classvsr_1_1_m_v.html">Vec</a> v(p);        
<a name="l00599"></a>00599         
<a name="l00600"></a>00600                 <span class="keywordflow">if</span> ( v[0] &lt; f.<a class="code" href="classvsr_1_1_lattice.html#aa7980f86fab67344ef05023b85cb3c7b">px</a>(0) ) v[0] = f.<a class="code" href="classvsr_1_1_lattice.html#aa7980f86fab67344ef05023b85cb3c7b">px</a>(0);<span class="comment">// + f.spacing()/2.0;</span>
<a name="l00601"></a>00601         <span class="keywordflow">else</span> <span class="keywordflow">if</span>  ( v[0] &gt; f.<a class="code" href="classvsr_1_1_lattice.html#aa7980f86fab67344ef05023b85cb3c7b">px</a>(f.<a class="code" href="classvsr_1_1_lattice.html#ae377e62dbbed1f950bd900c34b30fb89" title="get width">w</a>()-1) ) v[0] = f.<a class="code" href="classvsr_1_1_lattice.html#aa7980f86fab67344ef05023b85cb3c7b">px</a>(f.<a class="code" href="classvsr_1_1_lattice.html#ae377e62dbbed1f950bd900c34b30fb89" title="get width">w</a>()-1);<span class="comment">// - f.spacing()/2.0;</span>
<a name="l00602"></a>00602 
<a name="l00603"></a>00603                 <span class="keywordflow">if</span> ( v[1] &lt; f.<a class="code" href="classvsr_1_1_lattice.html#a379c9936aaabee457da8ba07ca49eb9c">py</a>(0) ) v[1] = f.<a class="code" href="classvsr_1_1_lattice.html#a379c9936aaabee457da8ba07ca49eb9c">py</a>(0);<span class="comment">// + f.spacing()/2.0;      </span>
<a name="l00604"></a>00604         <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( v[1] &gt; f.<a class="code" href="classvsr_1_1_lattice.html#a379c9936aaabee457da8ba07ca49eb9c">py</a>(f.<a class="code" href="classvsr_1_1_lattice.html#a51b0756a11687bb9f69f886ed90ff68a" title="get height">h</a>()-1) ) v[1] = f.<a class="code" href="classvsr_1_1_lattice.html#a379c9936aaabee457da8ba07ca49eb9c">py</a>(f.<a class="code" href="classvsr_1_1_lattice.html#a51b0756a11687bb9f69f886ed90ff68a" title="get height">h</a>()-1);<span class="comment">// - f.spacing()/2.0;     </span>
<a name="l00605"></a>00605         
<a name="l00606"></a>00606                 <span class="keywordflow">if</span> ( v[2] &gt; f.<a class="code" href="classvsr_1_1_lattice.html#a23f71aa3f59b772413330dd0784737a1">pz</a>(0) ) v[2] = f.<a class="code" href="classvsr_1_1_lattice.html#a23f71aa3f59b772413330dd0784737a1">pz</a>(0);<span class="comment">// - f.spacing()/2.0;</span>
<a name="l00607"></a>00607                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( v[2] &lt; f.<a class="code" href="classvsr_1_1_lattice.html#a23f71aa3f59b772413330dd0784737a1">pz</a>(f.<a class="code" href="classvsr_1_1_lattice.html#a5ee2e0d41d22764521a812a82074886b" title="get depth">d</a>()-1) ) v[2] = f.<a class="code" href="classvsr_1_1_lattice.html#a23f71aa3f59b772413330dd0784737a1">pz</a>(f.<a class="code" href="classvsr_1_1_lattice.html#a5ee2e0d41d22764521a812a82074886b" title="get depth">d</a>()-1);<span class="comment">// + f.spacing()/2.0;     </span>
<a name="l00608"></a>00608 
<a name="l00609"></a>00609                 <span class="keywordflow">return</span> v;
<a name="l00610"></a>00610         }       
<a name="l00611"></a>00611     
<a name="l00614"></a>00614     
<a name="l00615"></a>00615         <span class="comment">//what vxl are we in at vec v with regards to lattice f ?</span>
<a name="l00616"></a>00616         <span class="keyword">template</span> &lt; <span class="keyword">class</span> T &gt; <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt; 
<a name="l00617"></a><a class="code" href="classvsr_1_1_lattice.html#ac9ed3c0ce10a532873a1781cea9c9ef2">00617</a>         <a class="code" href="classvsr_1_1_vxl.html">Vxl</a> <a class="code" href="classvsr_1_1_lattice.html">Lattice &lt; T &gt;</a> :: _vxlOfVec( <span class="keyword">const</span> <a class="code" href="classvsr_1_1_m_v.html">Vec</a>&amp; tv, <span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice&lt;S&gt;</a>&amp; f ) {  
<a name="l00618"></a>00618                 
<a name="l00619"></a>00619                 <a class="code" href="classvsr_1_1_vxl.html">Vxl</a> vxl;
<a name="l00620"></a>00620                 
<a name="l00621"></a>00621         <a class="code" href="classvsr_1_1_m_v.html">Vec</a> v = limit(f, tv);
<a name="l00622"></a>00622                 <span class="comment">//Bottom - Left corner          </span>
<a name="l00623"></a>00623                 <span class="keywordtype">int</span> w = floor((v[0] + f.<a class="code" href="classvsr_1_1_lattice.html#abd26d1837e90caa2d074ac5ef9a13d0c">ow</a>() ) / f.<a class="code" href="classvsr_1_1_lattice.html#a1ed10107c28f1bc09c5f10e980b8545d">spacing</a>() );
<a name="l00624"></a>00624                 <span class="keywordtype">int</span> h = floor((v[1] + f.<a class="code" href="classvsr_1_1_lattice.html#a9c3d0411d400973f2888dca156a6e6db">oh</a>() ) / f.<a class="code" href="classvsr_1_1_lattice.html#a1ed10107c28f1bc09c5f10e980b8545d">spacing</a>() );
<a name="l00625"></a>00625                 <span class="keywordtype">int</span> d = floor((-v[2] + f.<a class="code" href="classvsr_1_1_lattice.html#a9397b69714d0628457143d47f11b2d89">od</a>() ) / f.<a class="code" href="classvsr_1_1_lattice.html#a1ed10107c28f1bc09c5f10e980b8545d">spacing</a>() );
<a name="l00626"></a>00626         
<a name="l00627"></a>00627         <span class="keywordflow">if</span> (w &gt; f.<a class="code" href="classvsr_1_1_lattice.html#ae377e62dbbed1f950bd900c34b30fb89" title="get width">w</a>()-2) w = f.<a class="code" href="classvsr_1_1_lattice.html#ae377e62dbbed1f950bd900c34b30fb89" title="get width">w</a>() -2;
<a name="l00628"></a>00628         <span class="keywordflow">if</span> (h &gt; f.<a class="code" href="classvsr_1_1_lattice.html#a51b0756a11687bb9f69f886ed90ff68a" title="get height">h</a>()-2) h = f.<a class="code" href="classvsr_1_1_lattice.html#a51b0756a11687bb9f69f886ed90ff68a" title="get height">h</a>() -2;
<a name="l00629"></a>00629         <span class="keywordflow">if</span> (d &gt; f.<a class="code" href="classvsr_1_1_lattice.html#a5ee2e0d41d22764521a812a82074886b" title="get depth">d</a>() -2) d = f.<a class="code" href="classvsr_1_1_lattice.html#a5ee2e0d41d22764521a812a82074886b" title="get depth">d</a>() -2;
<a name="l00630"></a>00630 
<a name="l00631"></a>00631                 vxl.a = _indexOf(w,h,d, f);
<a name="l00632"></a>00632                 vxl.b = _indexOf(w+1,h,d, f);
<a name="l00633"></a>00633                 vxl.c = _indexOf(w+1,h+1,d, f);
<a name="l00634"></a>00634                 vxl.d = _indexOf(w,h+1,d, f);
<a name="l00635"></a>00635 
<a name="l00636"></a>00636                 vxl.e = _indexOf(w,h,d+1, f);
<a name="l00637"></a>00637                 vxl.f = _indexOf(w+1,h,d+1, f);
<a name="l00638"></a>00638                 vxl.g = _indexOf(w+1,h+1,d+1, f);
<a name="l00639"></a>00639                 vxl.h = _indexOf(w,h+1,d+1, f);
<a name="l00640"></a>00640                 
<a name="l00641"></a>00641                 <span class="keywordflow">return</span> vxl;
<a name="l00642"></a>00642         }
<a name="l00643"></a>00643         
<a name="l00644"></a>00644         <span class="keyword">template</span> &lt; <span class="keyword">class</span> T &gt; <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt; 
<a name="l00645"></a><a class="code" href="classvsr_1_1_lattice.html#a93525a3a9a3ef5e28f03e028f4833074">00645</a>         <a class="code" href="classvsr_1_1_vxl.html">Vxl</a> <a class="code" href="classvsr_1_1_lattice.html">Lattice &lt; T &gt;</a> :: _vxlOfPnt( <span class="keyword">const</span> <a class="code" href="classvsr_1_1_m_v.html">Pnt</a>&amp; p, <span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice&lt;S&gt;</a>&amp; f )  {
<a name="l00646"></a>00646                 <span class="keywordflow">return</span> _vxlOfVec(p,f);
<a name="l00647"></a>00647         }
<a name="l00648"></a>00648         
<a name="l00649"></a>00649         <span class="comment">//index of w h d</span>
<a name="l00650"></a>00650         <span class="keyword">template</span> &lt; <span class="keyword">class</span> T &gt; <span class="keyword">template</span> &lt; <span class="keyword">class</span> S &gt; 
<a name="l00651"></a><a class="code" href="classvsr_1_1_lattice.html#a89bcfc67612783002e054fc5bf453a7b">00651</a>         <span class="keywordtype">int</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice &lt; T &gt;</a> :: _indexOf(<span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">int</span> d, <span class="keyword">const</span> <a class="code" href="classvsr_1_1_lattice.html">Lattice&lt;S&gt;</a>&amp; f){
<a name="l00652"></a>00652                 <span class="comment">//limit bounds          </span>
<a name="l00653"></a>00653                 <span class="keywordflow">if</span> (w &gt; f.<a class="code" href="classvsr_1_1_lattice.html#ae377e62dbbed1f950bd900c34b30fb89" title="get width">w</a>() - 1) w = f.<a class="code" href="classvsr_1_1_lattice.html#ae377e62dbbed1f950bd900c34b30fb89" title="get width">w</a>()  -1;
<a name="l00654"></a>00654                 <span class="keywordflow">if</span> (h &gt; f.<a class="code" href="classvsr_1_1_lattice.html#a51b0756a11687bb9f69f886ed90ff68a" title="get height">h</a>() - 1) h = f.<a class="code" href="classvsr_1_1_lattice.html#a51b0756a11687bb9f69f886ed90ff68a" title="get height">h</a>()  -1;
<a name="l00655"></a>00655                 <span class="keywordflow">if</span> (d &gt; f.<a class="code" href="classvsr_1_1_lattice.html#a5ee2e0d41d22764521a812a82074886b" title="get depth">d</a>() - 1) d = f.<a class="code" href="classvsr_1_1_lattice.html#a5ee2e0d41d22764521a812a82074886b" title="get depth">d</a>()  -1;
<a name="l00656"></a>00656 
<a name="l00657"></a>00657                 <span class="keywordflow">if</span> (w &lt; 0 ) w = 0;
<a name="l00658"></a>00658                 <span class="keywordflow">if</span> (h &lt; 0 ) h = 0;
<a name="l00659"></a>00659                 <span class="keywordflow">if</span> (d &lt; 0 ) d = 0;
<a name="l00660"></a>00660                 
<a name="l00661"></a>00661                 <span class="keywordflow">return</span> (w * f.<a class="code" href="classvsr_1_1_lattice.html#a51b0756a11687bb9f69f886ed90ff68a" title="get height">h</a>() * f.<a class="code" href="classvsr_1_1_lattice.html#a5ee2e0d41d22764521a812a82074886b" title="get depth">d</a>() ) + (h * f.<a class="code" href="classvsr_1_1_lattice.html#a5ee2e0d41d22764521a812a82074886b" title="get depth">d</a>()) + d; 
<a name="l00662"></a>00662         }
<a name="l00663"></a>00663 } <span class="comment">//vsr::</span>
<a name="l00664"></a>00664 <span class="preprocessor">#endif</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 29 2012 11:42:40 for Versor by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
